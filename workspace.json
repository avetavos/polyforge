{
  "version": 2,
  "projects": {
    "order-service": {
      "root": "services/order-service",
      "targets": {
        "build": {
          "executor": "nx:run-commands",
          "options": {
            "command": "docker build -t polyforge/order-service:latest .service/order-service"
          }
        },
        "serve": {
          "executor": "nx:run-commands",
          "options": {
            "command": "uvicorn app.main:app --host 0.0.0.0 --port 8000"
          }
        }
      }
    },
    "catalog-service": {
      "root": "services/catalog-service",
      "targets": {
        "build": {
          "executor": "nx:run-commands",
          "options": {
            "command": "docker build -t polyforge/catalog-service:latest .service/catalog-service"
          }
        },
        "serve": {
          "executor": "nx:run-commands",
          "options": {
            "command": "./services/catalog-service/target/release/catalog-service"
          }
        }
      }
    },
    "inventory-service": {
      "root": "services/inventory-service",
      "targets": {
        "build": {
          "executor": "nx:run-commands",
          "options": {
            "command": "docker build -t polyforge/inventory-service ./services/inventory-service"
          }
        },
        "serve": {
          "executor": "nx:run-commands",
          "options": {
            "command": "npm run start:dev --prefix services/inventory-service"
          }
        }
      }
    },
    "recommendation-service": {
      "root": "services/recommendation-service",
      "targets": {
        "build": {
          "executor": "nx:run-commands",
          "options": {
            "command": "docker build -t polyforge/recommendation-service ./services/recommendation-service"
          }
        },
        "serve": {
          "executor": "nx:run-commands",
          "options": {
            "command": "./services/recommendation-service/target/release/recommendation-service"
          }
        }
      }
    },
    "kong": {
      "root": "infra",
      "targets": {
        "build": {
          "executor": "nx:run-commands",
          "options": {
            "command": "docker compose -f infra/docker-compose.yml build kong"
          }
        },
        "serve": {
          "executor": "nx:run-commands",
          "options": {
            "command": "docker compose -f infra/docker-compose.yml up kong"
          }
        },
        "migrate": {
          "executor": "nx:run-commands",
          "options": {
            "command": "docker compose -f infra/docker-compose.yml run --rm kong-migrations"
          }
        }
      }
    }
  }
}
